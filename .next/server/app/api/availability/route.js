"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/availability/route";
exports.ids = ["app/api/availability/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Favailability%2Froute&page=%2Fapi%2Favailability%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Favailability%2Froute.ts&appDir=C%3A%5CUsers%5Cmarco%5CDownloads%5Cled-rental-app-min%5Cled-rental-app%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmarco%5CDownloads%5Cled-rental-app-min%5Cled-rental-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Favailability%2Froute&page=%2Fapi%2Favailability%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Favailability%2Froute.ts&appDir=C%3A%5CUsers%5Cmarco%5CDownloads%5Cled-rental-app-min%5Cled-rental-app%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmarco%5CDownloads%5Cled-rental-app-min%5Cled-rental-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_marco_Downloads_led_rental_app_min_led_rental_app_src_app_api_availability_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/availability/route.ts */ \"(rsc)/./src/app/api/availability/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/availability/route\",\n        pathname: \"/api/availability\",\n        filename: \"route\",\n        bundlePath: \"app/api/availability/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\marco\\\\Downloads\\\\led-rental-app-min\\\\led-rental-app\\\\src\\\\app\\\\api\\\\availability\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_marco_Downloads_led_rental_app_min_led_rental_app_src_app_api_availability_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/availability/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdmFpbGFiaWxpdHklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF2YWlsYWJpbGl0eSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF2YWlsYWJpbGl0eSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNtYXJjbyU1Q0Rvd25sb2FkcyU1Q2xlZC1yZW50YWwtYXBwLW1pbiU1Q2xlZC1yZW50YWwtYXBwJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNtYXJjbyU1Q0Rvd25sb2FkcyU1Q2xlZC1yZW50YWwtYXBwLW1pbiU1Q2xlZC1yZW50YWwtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNzRDtBQUNuSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2xlZC1yZW50YWwtYXBwLz81ZjA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXG1hcmNvXFxcXERvd25sb2Fkc1xcXFxsZWQtcmVudGFsLWFwcC1taW5cXFxcbGVkLXJlbnRhbC1hcHBcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYXZhaWxhYmlsaXR5XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdmFpbGFiaWxpdHkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdmFpbGFiaWxpdHlcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F2YWlsYWJpbGl0eS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXG1hcmNvXFxcXERvd25sb2Fkc1xcXFxsZWQtcmVudGFsLWFwcC1taW5cXFxcbGVkLXJlbnRhbC1hcHBcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYXZhaWxhYmlsaXR5XFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdmFpbGFiaWxpdHkvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Favailability%2Froute&page=%2Fapi%2Favailability%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Favailability%2Froute.ts&appDir=C%3A%5CUsers%5Cmarco%5CDownloads%5Cled-rental-app-min%5Cled-rental-app%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmarco%5CDownloads%5Cled-rental-app-min%5Cled-rental-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/availability/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/availability/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n\n\nasync function GET() {\n    try {\n        // Buscar estoque atual (produtos, acessórios, equipamentos)\n        const [products, accessories, equipment] = await Promise.all([\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.product.findMany({\n                select: {\n                    id: true,\n                    name: true,\n                    code: true,\n                    totalMeters: true,\n                    pricePerMeter: true\n                }\n            }),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.accessory.findMany({\n                select: {\n                    id: true,\n                    name: true,\n                    code: true,\n                    totalQty: true,\n                    pricePerUnit: true\n                }\n            }),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.equipment.findMany({\n                select: {\n                    id: true,\n                    name: true,\n                    code: true,\n                    totalQty: true,\n                    pricePerUnit: true\n                }\n            })\n        ]);\n        // Buscar locações ativas (que podem estar ocupando itens)\n        const activeBookings = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.booking.findMany({\n            where: {\n                status: {\n                    in: [\n                        \"CONFIRMED\",\n                        \"IN_PROGRESS\",\n                        \"PENDING\"\n                    ]\n                }\n            },\n            include: {\n                items: {\n                    include: {\n                        product: true\n                    }\n                },\n                accessories: {\n                    include: {\n                        accessory: true\n                    }\n                },\n                equipment: {\n                    include: {\n                        equipment: true\n                    }\n                },\n                client: {\n                    select: {\n                        name: true\n                    }\n                }\n            }\n        });\n        // Calcular disponibilidade atual\n        const currentAvailability = {\n            products: products.map((product)=>{\n                const occupiedMeters = activeBookings.reduce((total, booking)=>{\n                    return total + booking.items.filter((item)=>item.productId === product.id).reduce((sum, item)=>sum + item.meters, 0);\n                }, 0);\n                return {\n                    ...product,\n                    occupiedMeters,\n                    availableMeters: Math.max(0, product.totalMeters - occupiedMeters),\n                    utilizationPercent: product.totalMeters > 0 ? Math.round(occupiedMeters / product.totalMeters * 100) : 0,\n                    status: product.totalMeters - occupiedMeters > 0 ? \"DISPON\\xcdVEL\" : \"INDISPON\\xcdVEL\"\n                };\n            }),\n            accessories: accessories.map((accessory)=>{\n                const occupiedQty = activeBookings.reduce((total, booking)=>{\n                    return total + booking.accessories.filter((acc)=>acc.accessoryId === accessory.id).reduce((sum, acc)=>sum + acc.quantity, 0);\n                }, 0);\n                return {\n                    ...accessory,\n                    occupiedQty,\n                    availableQty: Math.max(0, accessory.totalQty - occupiedQty),\n                    utilizationPercent: accessory.totalQty > 0 ? Math.round(occupiedQty / accessory.totalQty * 100) : 0,\n                    status: accessory.totalQty - occupiedQty > 0 ? \"DISPON\\xcdVEL\" : \"INDISPON\\xcdVEL\"\n                };\n            }),\n            equipment: equipment.map((equip)=>{\n                const occupiedQty = activeBookings.reduce((total, booking)=>{\n                    return total + booking.equipment.filter((eq)=>eq.equipmentId === equip.id).reduce((sum, eq)=>sum + eq.quantity, 0);\n                }, 0);\n                return {\n                    ...equip,\n                    occupiedQty,\n                    availableQty: Math.max(0, equip.totalQty - occupiedQty),\n                    utilizationPercent: equip.totalQty > 0 ? Math.round(occupiedQty / equip.totalQty * 100) : 0,\n                    status: equip.totalQty - occupiedQty > 0 ? \"DISPON\\xcdVEL\" : \"INDISPON\\xcdVEL\"\n                };\n            })\n        };\n        // Resumo geral\n        const summary = {\n            totalProducts: products.length,\n            totalAccessories: accessories.length,\n            totalEquipment: equipment.length,\n            totalProductMeters: products.reduce((sum, p)=>sum + p.totalMeters, 0),\n            totalAccessoryQty: accessories.reduce((sum, a)=>sum + a.totalQty, 0),\n            totalEquipmentQty: equipment.reduce((sum, e)=>sum + e.totalQty, 0),\n            occupiedProductMeters: currentAvailability.products.reduce((sum, p)=>sum + p.occupiedMeters, 0),\n            occupiedAccessoryQty: currentAvailability.accessories.reduce((sum, a)=>sum + a.occupiedQty, 0),\n            occupiedEquipmentQty: currentAvailability.equipment.reduce((sum, e)=>sum + e.occupiedQty, 0),\n            availableProductMeters: currentAvailability.products.reduce((sum, p)=>sum + p.availableMeters, 0),\n            availableAccessoryQty: currentAvailability.accessories.reduce((sum, a)=>sum + a.availableQty, 0),\n            availableEquipmentQty: currentAvailability.equipment.reduce((sum, e)=>sum + e.availableQty, 0),\n            lastUpdated: new Date().toISOString()\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            currentAvailability,\n            summary,\n            activeBookings: activeBookings.length\n        });\n    } catch (error) {\n        console.error(\"Erro ao buscar disponibilidade:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Erro interno do servidor\"\n        }, {\n            status: 500\n        });\n    } finally{\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.$disconnect();\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { startDate, endDate, items } = body;\n        if (!startDate || !endDate || !items || items.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Datas de in\\xedcio/fim e itens s\\xe3o obrigat\\xf3rios\"\n            }, {\n                status: 400\n            });\n        }\n        const start = new Date(startDate);\n        const end = new Date(endDate);\n        if (start >= end) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"A data de in\\xedcio deve ser anterior \\xe0 data de fim\"\n            }, {\n                status: 400\n            });\n        }\n        // Buscar locações que se sobrepõem ao período solicitado\n        const overlappingBookings = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.booking.findMany({\n            where: {\n                AND: [\n                    {\n                        startDate: {\n                            lte: end\n                        }\n                    },\n                    {\n                        endDate: {\n                            gte: start\n                        }\n                    },\n                    {\n                        status: {\n                            in: [\n                                \"CONFIRMED\",\n                                \"IN_PROGRESS\",\n                                \"PENDING\"\n                            ]\n                        }\n                    }\n                ]\n            },\n            include: {\n                items: {\n                    include: {\n                        product: true\n                    }\n                },\n                accessories: {\n                    include: {\n                        accessory: true\n                    }\n                },\n                equipment: {\n                    include: {\n                        equipment: true\n                    }\n                },\n                client: {\n                    select: {\n                        name: true\n                    }\n                }\n            }\n        });\n        // Verificar disponibilidade para cada item solicitado\n        const availabilityResults = [];\n        let allAvailable = true;\n        for (const requestedItem of items){\n            const { type, id, quantity, unit } = requestedItem;\n            let itemInfo, occupiedQuantity, totalQuantity, availableQuantity;\n            let occupyingBookings = [];\n            switch(type){\n                case \"PRODUTO\":\n                    itemInfo = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.product.findUnique({\n                        where: {\n                            id\n                        }\n                    });\n                    if (itemInfo) {\n                        totalQuantity = itemInfo.totalMeters;\n                        occupiedQuantity = overlappingBookings.reduce((total, booking)=>{\n                            return total + booking.items.filter((item)=>item.productId === id).reduce((sum, item)=>sum + item.meters, 0);\n                        }, 0);\n                        availableQuantity = Math.max(0, totalQuantity - occupiedQuantity);\n                        // Buscar locações que estão ocupando este produto\n                        overlappingBookings.forEach((booking)=>{\n                            booking.items.forEach((item)=>{\n                                if (item.productId === id && item.meters > 0) {\n                                    occupyingBookings.push({\n                                        bookingId: booking.id,\n                                        eventTitle: booking.eventTitle,\n                                        clientName: booking.client.name,\n                                        startDate: booking.startDate,\n                                        endDate: booking.endDate,\n                                        occupiedQuantity: item.meters,\n                                        status: booking.status\n                                    });\n                                }\n                            });\n                        });\n                    }\n                    break;\n                case \"ACESS\\xd3RIO\":\n                    itemInfo = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.accessory.findUnique({\n                        where: {\n                            id\n                        }\n                    });\n                    if (itemInfo) {\n                        totalQuantity = itemInfo.totalQty;\n                        occupiedQuantity = overlappingBookings.reduce((total, booking)=>{\n                            return total + booking.accessories.filter((acc)=>acc.accessoryId === id).reduce((sum, acc)=>sum + acc.quantity, 0);\n                        }, 0);\n                        availableQuantity = Math.max(0, totalQuantity - occupiedQuantity);\n                        // Buscar locações que estão ocupando este acessório\n                        overlappingBookings.forEach((booking)=>{\n                            booking.accessories.forEach((acc)=>{\n                                if (acc.accessoryId === id && acc.quantity > 0) {\n                                    occupyingBookings.push({\n                                        bookingId: booking.id,\n                                        eventTitle: booking.eventTitle,\n                                        clientName: booking.client.name,\n                                        startDate: booking.startDate,\n                                        endDate: booking.endDate,\n                                        occupiedQuantity: acc.quantity,\n                                        status: booking.status\n                                    });\n                                }\n                            });\n                        });\n                    }\n                    break;\n                case \"EQUIPAMENTO\":\n                    itemInfo = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.equipment.findUnique({\n                        where: {\n                            id\n                        }\n                    });\n                    if (itemInfo) {\n                        totalQuantity = itemInfo.totalQty;\n                        occupiedQuantity = overlappingBookings.reduce((total, booking)=>{\n                            return total + booking.equipment.filter((eq)=>eq.equipmentId === id).reduce((sum, eq)=>sum + eq.quantity, 0);\n                        }, 0);\n                        availableQuantity = Math.max(0, totalQuantity - occupiedQuantity);\n                        // Buscar locações que estão ocupando este equipamento\n                        overlappingBookings.forEach((booking)=>{\n                            booking.equipment.forEach((eq)=>{\n                                if (eq.equipmentId === id && eq.quantity > 0) {\n                                    occupyingBookings.push({\n                                        bookingId: booking.id,\n                                        eventTitle: booking.eventTitle,\n                                        clientName: booking.client.name,\n                                        startDate: booking.startDate,\n                                        endDate: booking.endDate,\n                                        occupiedQuantity: eq.quantity,\n                                        status: booking.status\n                                    });\n                                }\n                            });\n                        });\n                    }\n                    break;\n            }\n            if (itemInfo) {\n                const isAvailable = availableQuantity >= quantity;\n                if (!isAvailable) allAvailable = false;\n                availabilityResults.push({\n                    id,\n                    name: itemInfo.name,\n                    code: itemInfo.code,\n                    type,\n                    requestedQuantity: quantity,\n                    availableQuantity,\n                    totalQuantity,\n                    occupiedQuantity,\n                    unit,\n                    status: isAvailable ? \"DISPON\\xcdVEL\" : \"INDISPON\\xcdVEL\",\n                    reason: isAvailable ? undefined : `Quantidade insuficiente. Disponível: ${availableQuantity} ${unit}`,\n                    occupyingBookings\n                });\n            }\n        }\n        // Resumo da verificação\n        const summary = {\n            totalItems: items.length,\n            availableItems: availabilityResults.filter((item)=>item.status === \"DISPON\\xcdVEL\").length,\n            unavailableItems: availabilityResults.filter((item)=>item.status === \"INDISPON\\xcdVEL\").length,\n            generalStatus: allAvailable ? \"TOTALMENTE_DISPONIVEL\" : \"PARCIALMENTE_DISPONIVEL\"\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            available: allAvailable,\n            results: availabilityResults,\n            summary,\n            period: {\n                startDate: start.toISOString(),\n                endDate: end.toISOString()\n            },\n            message: allAvailable ? \"Todos os itens est\\xe3o dispon\\xedveis para o per\\xedodo solicitado\" : \"Alguns itens n\\xe3o est\\xe3o dispon\\xedveis para o per\\xedodo solicitado\",\n            recommendation: allAvailable ? \"Pode prosseguir com a cria\\xe7\\xe3o da loca\\xe7\\xe3o\" : \"Verifique a disponibilidade dos itens indispon\\xedveis antes de prosseguir\"\n        });\n    } catch (error) {\n        console.error(\"Erro ao verificar disponibilidade:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Erro interno do servidor\"\n        }, {\n            status: 500\n        });\n    } finally{\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.$disconnect();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ3BDO1lBQUVsRCxRQUFRO1FBQUk7SUFFbEIsU0FBVTtRQUNSLE1BQU1yQiwyQ0FBTUEsQ0FBQ3lFLFdBQVc7SUFDMUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2xlZC1yZW50YWwtYXBwLy4vc3JjL2FwcC9hcGkvYXZhaWxhYmlsaXR5L3JvdXRlLnRzP2VkYWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9kYidcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEJ1c2NhciBlc3RvcXVlIGF0dWFsIChwcm9kdXRvcywgYWNlc3PDs3Jpb3MsIGVxdWlwYW1lbnRvcylcclxuICAgIGNvbnN0IFtwcm9kdWN0cywgYWNjZXNzb3JpZXMsIGVxdWlwbWVudF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIHByaXNtYS5wcm9kdWN0LmZpbmRNYW55KHtcclxuICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgIGNvZGU6IHRydWUsXHJcbiAgICAgICAgICB0b3RhbE1ldGVyczogdHJ1ZSxcclxuICAgICAgICAgIHByaWNlUGVyTWV0ZXI6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pLFxyXG4gICAgICBwcmlzbWEuYWNjZXNzb3J5LmZpbmRNYW55KHtcclxuICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgIGNvZGU6IHRydWUsXHJcbiAgICAgICAgICB0b3RhbFF0eTogdHJ1ZSxcclxuICAgICAgICAgIHByaWNlUGVyVW5pdDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSksXHJcbiAgICAgIHByaXNtYS5lcXVpcG1lbnQuZmluZE1hbnkoe1xyXG4gICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgY29kZTogdHJ1ZSxcclxuICAgICAgICAgIHRvdGFsUXR5OiB0cnVlLFxyXG4gICAgICAgICAgcHJpY2VQZXJVbml0OiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgXSlcclxuXHJcbiAgICAvLyBCdXNjYXIgbG9jYcOnw7VlcyBhdGl2YXMgKHF1ZSBwb2RlbSBlc3RhciBvY3VwYW5kbyBpdGVucylcclxuICAgIGNvbnN0IGFjdGl2ZUJvb2tpbmdzID0gYXdhaXQgcHJpc21hLmJvb2tpbmcuZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIHN0YXR1czogeyBpbjogWydDT05GSVJNRUQnLCAnSU5fUFJPR1JFU1MnLCAnUEVORElORyddIH1cclxuICAgICAgfSxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIGl0ZW1zOiB7IGluY2x1ZGU6IHsgcHJvZHVjdDogdHJ1ZSB9IH0sXHJcbiAgICAgICAgYWNjZXNzb3JpZXM6IHsgaW5jbHVkZTogeyBhY2Nlc3Nvcnk6IHRydWUgfSB9LFxyXG4gICAgICAgIGVxdWlwbWVudDogeyBpbmNsdWRlOiB7IGVxdWlwbWVudDogdHJ1ZSB9IH0sXHJcbiAgICAgICAgY2xpZW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIENhbGN1bGFyIGRpc3BvbmliaWxpZGFkZSBhdHVhbFxyXG4gICAgY29uc3QgY3VycmVudEF2YWlsYWJpbGl0eSA9IHtcclxuICAgICAgcHJvZHVjdHM6IHByb2R1Y3RzLm1hcChwcm9kdWN0ID0+IHtcclxuICAgICAgICBjb25zdCBvY2N1cGllZE1ldGVycyA9IGFjdGl2ZUJvb2tpbmdzLnJlZHVjZSgodG90YWwsIGJvb2tpbmcpID0+IHtcclxuICAgICAgICAgIHJldHVybiB0b3RhbCArIGJvb2tpbmcuaXRlbXNcclxuICAgICAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0ucHJvZHVjdElkID09PSBwcm9kdWN0LmlkKVxyXG4gICAgICAgICAgICAucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0ubWV0ZXJzLCAwKVxyXG4gICAgICAgIH0sIDApXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLnByb2R1Y3QsXHJcbiAgICAgICAgICBvY2N1cGllZE1ldGVycyxcclxuICAgICAgICAgIGF2YWlsYWJsZU1ldGVyczogTWF0aC5tYXgoMCwgcHJvZHVjdC50b3RhbE1ldGVycyAtIG9jY3VwaWVkTWV0ZXJzKSxcclxuICAgICAgICAgIHV0aWxpemF0aW9uUGVyY2VudDogcHJvZHVjdC50b3RhbE1ldGVycyA+IDAgXHJcbiAgICAgICAgICAgID8gTWF0aC5yb3VuZCgob2NjdXBpZWRNZXRlcnMgLyBwcm9kdWN0LnRvdGFsTWV0ZXJzKSAqIDEwMCkgXHJcbiAgICAgICAgICAgIDogMCxcclxuICAgICAgICAgIHN0YXR1czogKHByb2R1Y3QudG90YWxNZXRlcnMgLSBvY2N1cGllZE1ldGVycykgPiAwID8gJ0RJU1BPTsONVkVMJyA6ICdJTkRJU1BPTsONVkVMJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSksXHJcbiAgICAgIGFjY2Vzc29yaWVzOiBhY2Nlc3Nvcmllcy5tYXAoYWNjZXNzb3J5ID0+IHtcclxuICAgICAgICBjb25zdCBvY2N1cGllZFF0eSA9IGFjdGl2ZUJvb2tpbmdzLnJlZHVjZSgodG90YWwsIGJvb2tpbmcpID0+IHtcclxuICAgICAgICAgIHJldHVybiB0b3RhbCArIGJvb2tpbmcuYWNjZXNzb3JpZXNcclxuICAgICAgICAgICAgLmZpbHRlcihhY2MgPT4gYWNjLmFjY2Vzc29yeUlkID09PSBhY2Nlc3NvcnkuaWQpXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgYWNjKSA9PiBzdW0gKyBhY2MucXVhbnRpdHksIDApXHJcbiAgICAgICAgfSwgMClcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4uYWNjZXNzb3J5LFxyXG4gICAgICAgICAgb2NjdXBpZWRRdHksXHJcbiAgICAgICAgICBhdmFpbGFibGVRdHk6IE1hdGgubWF4KDAsIGFjY2Vzc29yeS50b3RhbFF0eSAtIG9jY3VwaWVkUXR5KSxcclxuICAgICAgICAgIHV0aWxpemF0aW9uUGVyY2VudDogYWNjZXNzb3J5LnRvdGFsUXR5ID4gMCBcclxuICAgICAgICAgICAgPyBNYXRoLnJvdW5kKChvY2N1cGllZFF0eSAvIGFjY2Vzc29yeS50b3RhbFF0eSkgKiAxMDApIFxyXG4gICAgICAgICAgICA6IDAsXHJcbiAgICAgICAgICBzdGF0dXM6IChhY2Nlc3NvcnkudG90YWxRdHkgLSBvY2N1cGllZFF0eSkgPiAwID8gJ0RJU1BPTsONVkVMJyA6ICdJTkRJU1BPTsONVkVMJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSksXHJcbiAgICAgIGVxdWlwbWVudDogZXF1aXBtZW50Lm1hcChlcXVpcCA9PiB7XHJcbiAgICAgICAgY29uc3Qgb2NjdXBpZWRRdHkgPSBhY3RpdmVCb29raW5ncy5yZWR1Y2UoKHRvdGFsLCBib29raW5nKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gdG90YWwgKyBib29raW5nLmVxdWlwbWVudFxyXG4gICAgICAgICAgICAuZmlsdGVyKGVxID0+IGVxLmVxdWlwbWVudElkID09PSBlcXVpcC5pZClcclxuICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBlcSkgPT4gc3VtICsgZXEucXVhbnRpdHksIDApXHJcbiAgICAgICAgfSwgMClcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4uZXF1aXAsXHJcbiAgICAgICAgICBvY2N1cGllZFF0eSxcclxuICAgICAgICAgIGF2YWlsYWJsZVF0eTogTWF0aC5tYXgoMCwgZXF1aXAudG90YWxRdHkgLSBvY2N1cGllZFF0eSksXHJcbiAgICAgICAgICB1dGlsaXphdGlvblBlcmNlbnQ6IGVxdWlwLnRvdGFsUXR5ID4gMCBcclxuICAgICAgICAgICAgPyBNYXRoLnJvdW5kKChvY2N1cGllZFF0eSAvIGVxdWlwLnRvdGFsUXR5KSAqIDEwMCkgXHJcbiAgICAgICAgICAgIDogMCxcclxuICAgICAgICAgIHN0YXR1czogKGVxdWlwLnRvdGFsUXR5IC0gb2NjdXBpZWRRdHkpID4gMCA/ICdESVNQT07DjVZFTCcgOiAnSU5ESVNQT07DjVZFTCdcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVzdW1vIGdlcmFsXHJcbiAgICBjb25zdCBzdW1tYXJ5ID0ge1xyXG4gICAgICB0b3RhbFByb2R1Y3RzOiBwcm9kdWN0cy5sZW5ndGgsXHJcbiAgICAgIHRvdGFsQWNjZXNzb3JpZXM6IGFjY2Vzc29yaWVzLmxlbmd0aCxcclxuICAgICAgdG90YWxFcXVpcG1lbnQ6IGVxdWlwbWVudC5sZW5ndGgsXHJcbiAgICAgIHRvdGFsUHJvZHVjdE1ldGVyczogcHJvZHVjdHMucmVkdWNlKChzdW0sIHApID0+IHN1bSArIHAudG90YWxNZXRlcnMsIDApLFxyXG4gICAgICB0b3RhbEFjY2Vzc29yeVF0eTogYWNjZXNzb3JpZXMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIGEudG90YWxRdHksIDApLFxyXG4gICAgICB0b3RhbEVxdWlwbWVudFF0eTogZXF1aXBtZW50LnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyBlLnRvdGFsUXR5LCAwKSxcclxuICAgICAgb2NjdXBpZWRQcm9kdWN0TWV0ZXJzOiBjdXJyZW50QXZhaWxhYmlsaXR5LnByb2R1Y3RzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLm9jY3VwaWVkTWV0ZXJzLCAwKSxcclxuICAgICAgb2NjdXBpZWRBY2Nlc3NvcnlRdHk6IGN1cnJlbnRBdmFpbGFiaWxpdHkuYWNjZXNzb3JpZXMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIGEub2NjdXBpZWRRdHksIDApLFxyXG4gICAgICBvY2N1cGllZEVxdWlwbWVudFF0eTogY3VycmVudEF2YWlsYWJpbGl0eS5lcXVpcG1lbnQucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIGUub2NjdXBpZWRRdHksIDApLFxyXG4gICAgICBhdmFpbGFibGVQcm9kdWN0TWV0ZXJzOiBjdXJyZW50QXZhaWxhYmlsaXR5LnByb2R1Y3RzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLmF2YWlsYWJsZU1ldGVycywgMCksXHJcbiAgICAgIGF2YWlsYWJsZUFjY2Vzc29yeVF0eTogY3VycmVudEF2YWlsYWJpbGl0eS5hY2Nlc3Nvcmllcy5yZWR1Y2UoKHN1bSwgYSkgPT4gc3VtICsgYS5hdmFpbGFibGVRdHksIDApLFxyXG4gICAgICBhdmFpbGFibGVFcXVpcG1lbnRRdHk6IGN1cnJlbnRBdmFpbGFiaWxpdHkuZXF1aXBtZW50LnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyBlLmF2YWlsYWJsZVF0eSwgMCksXHJcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBjdXJyZW50QXZhaWxhYmlsaXR5LFxyXG4gICAgICBzdW1tYXJ5LFxyXG4gICAgICBhY3RpdmVCb29raW5nczogYWN0aXZlQm9va2luZ3MubGVuZ3RoXHJcbiAgICB9KVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJybyBhbyBidXNjYXIgZGlzcG9uaWJpbGlkYWRlOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRXJybyBpbnRlcm5vIGRvIHNlcnZpZG9yJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9IGZpbmFsbHkge1xyXG4gICAgYXdhaXQgcHJpc21hLiRkaXNjb25uZWN0KClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG4gICAgY29uc3QgeyBzdGFydERhdGUsIGVuZERhdGUsIGl0ZW1zIH0gPSBib2R5XHJcblxyXG4gICAgaWYgKCFzdGFydERhdGUgfHwgIWVuZERhdGUgfHwgIWl0ZW1zIHx8IGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0RhdGFzIGRlIGluw61jaW8vZmltIGUgaXRlbnMgc8OjbyBvYnJpZ2F0w7NyaW9zJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShzdGFydERhdGUpXHJcbiAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZShlbmREYXRlKVxyXG5cclxuICAgIGlmIChzdGFydCA+PSBlbmQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdBIGRhdGEgZGUgaW7DrWNpbyBkZXZlIHNlciBhbnRlcmlvciDDoCBkYXRhIGRlIGZpbScgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEJ1c2NhciBsb2Nhw6fDtWVzIHF1ZSBzZSBzb2JyZXDDtWVtIGFvIHBlcsOtb2RvIHNvbGljaXRhZG9cclxuICAgIGNvbnN0IG92ZXJsYXBwaW5nQm9va2luZ3MgPSBhd2FpdCBwcmlzbWEuYm9va2luZy5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgQU5EOiBbXHJcbiAgICAgICAgICB7IHN0YXJ0RGF0ZTogeyBsdGU6IGVuZCB9IH0sXHJcbiAgICAgICAgICB7IGVuZERhdGU6IHsgZ3RlOiBzdGFydCB9IH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogeyBpbjogWydDT05GSVJNRUQnLCAnSU5fUFJPR1JFU1MnLCAnUEVORElORyddIH0gfVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIGl0ZW1zOiB7IGluY2x1ZGU6IHsgcHJvZHVjdDogdHJ1ZSB9IH0sXHJcbiAgICAgICAgYWNjZXNzb3JpZXM6IHsgaW5jbHVkZTogeyBhY2Nlc3Nvcnk6IHRydWUgfSB9LFxyXG4gICAgICAgIGVxdWlwbWVudDogeyBpbmNsdWRlOiB7IGVxdWlwbWVudDogdHJ1ZSB9IH0sXHJcbiAgICAgICAgY2xpZW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIFZlcmlmaWNhciBkaXNwb25pYmlsaWRhZGUgcGFyYSBjYWRhIGl0ZW0gc29saWNpdGFkb1xyXG4gICAgY29uc3QgYXZhaWxhYmlsaXR5UmVzdWx0cyA9IFtdXHJcbiAgICBsZXQgYWxsQXZhaWxhYmxlID0gdHJ1ZVxyXG5cclxuICAgIGZvciAoY29uc3QgcmVxdWVzdGVkSXRlbSBvZiBpdGVtcykge1xyXG4gICAgICBjb25zdCB7IHR5cGUsIGlkLCBxdWFudGl0eSwgdW5pdCB9ID0gcmVxdWVzdGVkSXRlbVxyXG4gICAgICBcclxuICAgICAgbGV0IGl0ZW1JbmZvLCBvY2N1cGllZFF1YW50aXR5LCB0b3RhbFF1YW50aXR5LCBhdmFpbGFibGVRdWFudGl0eVxyXG4gICAgICBsZXQgb2NjdXB5aW5nQm9va2luZ3MgPSBbXVxyXG5cclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnUFJPRFVUTyc6XHJcbiAgICAgICAgICBpdGVtSW5mbyA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZCB9IH0pXHJcbiAgICAgICAgICBpZiAoaXRlbUluZm8pIHtcclxuICAgICAgICAgICAgdG90YWxRdWFudGl0eSA9IGl0ZW1JbmZvLnRvdGFsTWV0ZXJzXHJcbiAgICAgICAgICAgIG9jY3VwaWVkUXVhbnRpdHkgPSBvdmVybGFwcGluZ0Jvb2tpbmdzLnJlZHVjZSgodG90YWwsIGJvb2tpbmcpID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gdG90YWwgKyBib29raW5nLml0ZW1zXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS5wcm9kdWN0SWQgPT09IGlkKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyBpdGVtLm1ldGVycywgMClcclxuICAgICAgICAgICAgfSwgMClcclxuICAgICAgICAgICAgYXZhaWxhYmxlUXVhbnRpdHkgPSBNYXRoLm1heCgwLCB0b3RhbFF1YW50aXR5IC0gb2NjdXBpZWRRdWFudGl0eSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEJ1c2NhciBsb2Nhw6fDtWVzIHF1ZSBlc3TDo28gb2N1cGFuZG8gZXN0ZSBwcm9kdXRvXHJcbiAgICAgICAgICAgIG92ZXJsYXBwaW5nQm9va2luZ3MuZm9yRWFjaChib29raW5nID0+IHtcclxuICAgICAgICAgICAgICBib29raW5nLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wcm9kdWN0SWQgPT09IGlkICYmIGl0ZW0ubWV0ZXJzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBvY2N1cHlpbmdCb29raW5ncy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBib29raW5nSWQ6IGJvb2tpbmcuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRUaXRsZTogYm9va2luZy5ldmVudFRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudE5hbWU6IGJvb2tpbmcuY2xpZW50Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnREYXRlOiBib29raW5nLnN0YXJ0RGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiBib29raW5nLmVuZERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgb2NjdXBpZWRRdWFudGl0eTogaXRlbS5tZXRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBib29raW5nLnN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICBjYXNlICdBQ0VTU8OTUklPJzpcclxuICAgICAgICAgIGl0ZW1JbmZvID0gYXdhaXQgcHJpc21hLmFjY2Vzc29yeS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KVxyXG4gICAgICAgICAgaWYgKGl0ZW1JbmZvKSB7XHJcbiAgICAgICAgICAgIHRvdGFsUXVhbnRpdHkgPSBpdGVtSW5mby50b3RhbFF0eVxyXG4gICAgICAgICAgICBvY2N1cGllZFF1YW50aXR5ID0gb3ZlcmxhcHBpbmdCb29raW5ncy5yZWR1Y2UoKHRvdGFsLCBib29raW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsICsgYm9va2luZy5hY2Nlc3Nvcmllc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihhY2MgPT4gYWNjLmFjY2Vzc29yeUlkID09PSBpZClcclxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgYWNjKSA9PiBzdW0gKyBhY2MucXVhbnRpdHksIDApXHJcbiAgICAgICAgICAgIH0sIDApXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZVF1YW50aXR5ID0gTWF0aC5tYXgoMCwgdG90YWxRdWFudGl0eSAtIG9jY3VwaWVkUXVhbnRpdHkpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBCdXNjYXIgbG9jYcOnw7VlcyBxdWUgZXN0w6NvIG9jdXBhbmRvIGVzdGUgYWNlc3PDs3Jpb1xyXG4gICAgICAgICAgICBvdmVybGFwcGluZ0Jvb2tpbmdzLmZvckVhY2goYm9va2luZyA9PiB7XHJcbiAgICAgICAgICAgICAgYm9va2luZy5hY2Nlc3Nvcmllcy5mb3JFYWNoKGFjYyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWNjLmFjY2Vzc29yeUlkID09PSBpZCAmJiBhY2MucXVhbnRpdHkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIG9jY3VweWluZ0Jvb2tpbmdzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tpbmdJZDogYm9va2luZy5pZCxcclxuICAgICAgICAgICAgICAgICAgICBldmVudFRpdGxlOiBib29raW5nLmV2ZW50VGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50TmFtZTogYm9va2luZy5jbGllbnQubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFydERhdGU6IGJvb2tpbmcuc3RhcnREYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IGJvb2tpbmcuZW5kRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBvY2N1cGllZFF1YW50aXR5OiBhY2MucXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBib29raW5nLnN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICBjYXNlICdFUVVJUEFNRU5UTyc6XHJcbiAgICAgICAgICBpdGVtSW5mbyA9IGF3YWl0IHByaXNtYS5lcXVpcG1lbnQuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkIH0gfSlcclxuICAgICAgICAgIGlmIChpdGVtSW5mbykge1xyXG4gICAgICAgICAgICB0b3RhbFF1YW50aXR5ID0gaXRlbUluZm8udG90YWxRdHlcclxuICAgICAgICAgICAgb2NjdXBpZWRRdWFudGl0eSA9IG92ZXJsYXBwaW5nQm9va2luZ3MucmVkdWNlKCh0b3RhbCwgYm9va2luZykgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiB0b3RhbCArIGJvb2tpbmcuZXF1aXBtZW50XHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGVxID0+IGVxLmVxdWlwbWVudElkID09PSBpZClcclxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgZXEpID0+IHN1bSArIGVxLnF1YW50aXR5LCAwKVxyXG4gICAgICAgICAgICB9LCAwKVxyXG4gICAgICAgICAgICBhdmFpbGFibGVRdWFudGl0eSA9IE1hdGgubWF4KDAsIHRvdGFsUXVhbnRpdHkgLSBvY2N1cGllZFF1YW50aXR5KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQnVzY2FyIGxvY2HDp8O1ZXMgcXVlIGVzdMOjbyBvY3VwYW5kbyBlc3RlIGVxdWlwYW1lbnRvXHJcbiAgICAgICAgICAgIG92ZXJsYXBwaW5nQm9va2luZ3MuZm9yRWFjaChib29raW5nID0+IHtcclxuICAgICAgICAgICAgICBib29raW5nLmVxdWlwbWVudC5mb3JFYWNoKGVxID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcS5lcXVpcG1lbnRJZCA9PT0gaWQgJiYgZXEucXVhbnRpdHkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIG9jY3VweWluZ0Jvb2tpbmdzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGJvb2tpbmdJZDogYm9va2luZy5pZCxcclxuICAgICAgICAgICAgICAgICAgICBldmVudFRpdGxlOiBib29raW5nLmV2ZW50VGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50TmFtZTogYm9va2luZy5jbGllbnQubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFydERhdGU6IGJvb2tpbmcuc3RhcnREYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IGJvb2tpbmcuZW5kRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBvY2N1cGllZFF1YW50aXR5OiBlcS5xdWFudGl0eSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGJvb2tpbmcuc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpdGVtSW5mbykge1xyXG4gICAgICAgIGNvbnN0IGlzQXZhaWxhYmxlID0gYXZhaWxhYmxlUXVhbnRpdHkgPj0gcXVhbnRpdHlcclxuICAgICAgICBpZiAoIWlzQXZhaWxhYmxlKSBhbGxBdmFpbGFibGUgPSBmYWxzZVxyXG5cclxuICAgICAgICBhdmFpbGFiaWxpdHlSZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBuYW1lOiBpdGVtSW5mby5uYW1lLFxyXG4gICAgICAgICAgY29kZTogaXRlbUluZm8uY29kZSxcclxuICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICByZXF1ZXN0ZWRRdWFudGl0eTogcXVhbnRpdHksXHJcbiAgICAgICAgICBhdmFpbGFibGVRdWFudGl0eSxcclxuICAgICAgICAgIHRvdGFsUXVhbnRpdHksXHJcbiAgICAgICAgICBvY2N1cGllZFF1YW50aXR5LFxyXG4gICAgICAgICAgdW5pdCxcclxuICAgICAgICAgIHN0YXR1czogaXNBdmFpbGFibGUgPyAnRElTUE9Ow41WRUwnIDogJ0lORElTUE9Ow41WRUwnLFxyXG4gICAgICAgICAgcmVhc29uOiBpc0F2YWlsYWJsZSA/IHVuZGVmaW5lZCA6IGBRdWFudGlkYWRlIGluc3VmaWNpZW50ZS4gRGlzcG9uw612ZWw6ICR7YXZhaWxhYmxlUXVhbnRpdHl9ICR7dW5pdH1gLFxyXG4gICAgICAgICAgb2NjdXB5aW5nQm9va2luZ3NcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVzdW1vIGRhIHZlcmlmaWNhw6fDo29cclxuICAgIGNvbnN0IHN1bW1hcnkgPSB7XHJcbiAgICAgIHRvdGFsSXRlbXM6IGl0ZW1zLmxlbmd0aCxcclxuICAgICAgYXZhaWxhYmxlSXRlbXM6IGF2YWlsYWJpbGl0eVJlc3VsdHMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5zdGF0dXMgPT09ICdESVNQT07DjVZFTCcpLmxlbmd0aCxcclxuICAgICAgdW5hdmFpbGFibGVJdGVtczogYXZhaWxhYmlsaXR5UmVzdWx0cy5maWx0ZXIoaXRlbSA9PiBpdGVtLnN0YXR1cyA9PT0gJ0lORElTUE9Ow41WRUwnKS5sZW5ndGgsXHJcbiAgICAgIGdlbmVyYWxTdGF0dXM6IGFsbEF2YWlsYWJsZSA/ICdUT1RBTE1FTlRFX0RJU1BPTklWRUwnIDogJ1BBUkNJQUxNRU5URV9ESVNQT05JVkVMJ1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGF2YWlsYWJsZTogYWxsQXZhaWxhYmxlLFxyXG4gICAgICByZXN1bHRzOiBhdmFpbGFiaWxpdHlSZXN1bHRzLFxyXG4gICAgICBzdW1tYXJ5LFxyXG4gICAgICBwZXJpb2Q6IHsgc3RhcnREYXRlOiBzdGFydC50b0lTT1N0cmluZygpLCBlbmREYXRlOiBlbmQudG9JU09TdHJpbmcoKSB9LFxyXG4gICAgICBtZXNzYWdlOiBhbGxBdmFpbGFibGUgXHJcbiAgICAgICAgPyAnVG9kb3Mgb3MgaXRlbnMgZXN0w6NvIGRpc3BvbsOtdmVpcyBwYXJhIG8gcGVyw61vZG8gc29saWNpdGFkbydcclxuICAgICAgICA6ICdBbGd1bnMgaXRlbnMgbsOjbyBlc3TDo28gZGlzcG9uw612ZWlzIHBhcmEgbyBwZXLDrW9kbyBzb2xpY2l0YWRvJyxcclxuICAgICAgcmVjb21tZW5kYXRpb246IGFsbEF2YWlsYWJsZSBcclxuICAgICAgICA/ICdQb2RlIHByb3NzZWd1aXIgY29tIGEgY3JpYcOnw6NvIGRhIGxvY2HDp8OjbydcclxuICAgICAgICA6ICdWZXJpZmlxdWUgYSBkaXNwb25pYmlsaWRhZGUgZG9zIGl0ZW5zIGluZGlzcG9uw612ZWlzIGFudGVzIGRlIHByb3NzZWd1aXInXHJcbiAgICB9KVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJybyBhbyB2ZXJpZmljYXIgZGlzcG9uaWJpbGlkYWRlOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRXJybyBpbnRlcm5vIGRvIHNlcnZpZG9yJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9IGZpbmFsbHkge1xyXG4gICAgYXdhaXQgcHJpc21hLiRkaXNjb25uZWN0KClcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsIkdFVCIsInByb2R1Y3RzIiwiYWNjZXNzb3JpZXMiLCJlcXVpcG1lbnQiLCJQcm9taXNlIiwiYWxsIiwicHJvZHVjdCIsImZpbmRNYW55Iiwic2VsZWN0IiwiaWQiLCJuYW1lIiwiY29kZSIsInRvdGFsTWV0ZXJzIiwicHJpY2VQZXJNZXRlciIsImFjY2Vzc29yeSIsInRvdGFsUXR5IiwicHJpY2VQZXJVbml0IiwiYWN0aXZlQm9va2luZ3MiLCJib29raW5nIiwid2hlcmUiLCJzdGF0dXMiLCJpbiIsImluY2x1ZGUiLCJpdGVtcyIsImNsaWVudCIsImN1cnJlbnRBdmFpbGFiaWxpdHkiLCJtYXAiLCJvY2N1cGllZE1ldGVycyIsInJlZHVjZSIsInRvdGFsIiwiZmlsdGVyIiwiaXRlbSIsInByb2R1Y3RJZCIsInN1bSIsIm1ldGVycyIsImF2YWlsYWJsZU1ldGVycyIsIk1hdGgiLCJtYXgiLCJ1dGlsaXphdGlvblBlcmNlbnQiLCJyb3VuZCIsIm9jY3VwaWVkUXR5IiwiYWNjIiwiYWNjZXNzb3J5SWQiLCJxdWFudGl0eSIsImF2YWlsYWJsZVF0eSIsImVxdWlwIiwiZXEiLCJlcXVpcG1lbnRJZCIsInN1bW1hcnkiLCJ0b3RhbFByb2R1Y3RzIiwibGVuZ3RoIiwidG90YWxBY2Nlc3NvcmllcyIsInRvdGFsRXF1aXBtZW50IiwidG90YWxQcm9kdWN0TWV0ZXJzIiwicCIsInRvdGFsQWNjZXNzb3J5UXR5IiwiYSIsInRvdGFsRXF1aXBtZW50UXR5IiwiZSIsIm9jY3VwaWVkUHJvZHVjdE1ldGVycyIsIm9jY3VwaWVkQWNjZXNzb3J5UXR5Iiwib2NjdXBpZWRFcXVpcG1lbnRRdHkiLCJhdmFpbGFibGVQcm9kdWN0TWV0ZXJzIiwiYXZhaWxhYmxlQWNjZXNzb3J5UXR5IiwiYXZhaWxhYmxlRXF1aXBtZW50UXR5IiwibGFzdFVwZGF0ZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwiY29uc29sZSIsIiRkaXNjb25uZWN0IiwiUE9TVCIsInJlcXVlc3QiLCJib2R5Iiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInN0YXJ0IiwiZW5kIiwib3ZlcmxhcHBpbmdCb29raW5ncyIsIkFORCIsImx0ZSIsImd0ZSIsImF2YWlsYWJpbGl0eVJlc3VsdHMiLCJhbGxBdmFpbGFibGUiLCJyZXF1ZXN0ZWRJdGVtIiwidHlwZSIsInVuaXQiLCJpdGVtSW5mbyIsIm9jY3VwaWVkUXVhbnRpdHkiLCJ0b3RhbFF1YW50aXR5IiwiYXZhaWxhYmxlUXVhbnRpdHkiLCJvY2N1cHlpbmdCb29raW5ncyIsImZpbmRVbmlxdWUiLCJmb3JFYWNoIiwicHVzaCIsImJvb2tpbmdJZCIsImV2ZW50VGl0bGUiLCJjbGllbnROYW1lIiwiaXNBdmFpbGFibGUiLCJyZXF1ZXN0ZWRRdWFudGl0eSIsInJlYXNvbiIsInVuZGVmaW5lZCIsInRvdGFsSXRlbXMiLCJhdmFpbGFibGVJdGVtcyIsInVuYXZhaWxhYmxlSXRlbXMiLCJnZW5lcmFsU3RhdHVzIiwiYXZhaWxhYmxlIiwicmVzdWx0cyIsInBlcmlvZCIsIm1lc3NhZ2UiLCJyZWNvbW1lbmRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/availability/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlZC1yZW50YWwtYXBwLy4vc3JjL2xpYi9kYi50cz85ZTRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KClcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Favailability%2Froute&page=%2Fapi%2Favailability%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Favailability%2Froute.ts&appDir=C%3A%5CUsers%5Cmarco%5CDownloads%5Cled-rental-app-min%5Cled-rental-app%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmarco%5CDownloads%5Cled-rental-app-min%5Cled-rental-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();